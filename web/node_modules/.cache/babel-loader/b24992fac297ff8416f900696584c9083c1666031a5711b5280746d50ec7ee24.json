{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar LRUCache = require('./LRUCache');\nvar SuspenseResource = require('./SuspenseResource');\nvar invariant = require('invariant');\nvar _require = require('relay-runtime'),\n  isPromise = _require.isPromise;\nvar warning = require(\"fbjs/lib/warning\");\nvar CACHE_CAPACITY = 1000;\nvar DEFAULT_FETCH_POLICY = 'store-or-network';\nvar DEFAULT_LIVE_FETCH_POLICY = 'store-and-network';\nvar WEAKMAP_SUPPORTED = typeof WeakMap === 'function';\nfunction operationIsLiveQuery(operation) {\n  return operation.request.node.params.metadata.live !== undefined;\n}\nfunction getQueryCacheIdentifier(environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker) {\n  var fetchPolicy = maybeFetchPolicy !== null && maybeFetchPolicy !== void 0 ? maybeFetchPolicy : operationIsLiveQuery(operation) ? DEFAULT_LIVE_FETCH_POLICY : DEFAULT_FETCH_POLICY;\n  var renderPolicy = maybeRenderPolicy !== null && maybeRenderPolicy !== void 0 ? maybeRenderPolicy : environment.UNSTABLE_getDefaultRenderPolicy();\n  var cacheIdentifier = \"\".concat(fetchPolicy, \"-\").concat(renderPolicy, \"-\").concat(operation.request.identifier);\n  if (cacheBreaker != null) {\n    return \"\".concat(cacheIdentifier, \"-\").concat(cacheBreaker);\n  }\n  return cacheIdentifier;\n}\nfunction getQueryResult(operation, cacheIdentifier) {\n  var rootFragmentRef = {\n    __id: operation.fragment.dataID,\n    __fragments: (0, _defineProperty2[\"default\"])({}, operation.fragment.node.name, operation.request.variables),\n    __fragmentOwner: operation.request\n  };\n  return {\n    cacheIdentifier: cacheIdentifier,\n    fragmentNode: operation.request.node.fragment,\n    fragmentRef: rootFragmentRef,\n    operation: operation\n  };\n}\nvar nextID = 200000;\nfunction createCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription, onDispose) {\n  var isLiveQuery = operationIsLiveQuery(operation);\n  var currentValue = value;\n  var currentNetworkSubscription = networkSubscription;\n  var suspenseResource = new SuspenseResource(function (environment) {\n    var retention = environment.retain(operation);\n    return {\n      dispose: function dispose() {\n        if (isLiveQuery && currentNetworkSubscription != null) {\n          currentNetworkSubscription.unsubscribe();\n        }\n        retention.dispose();\n        onDispose(cacheEntry);\n      }\n    };\n  });\n  var cacheEntry = {\n    cacheIdentifier: cacheIdentifier,\n    id: nextID++,\n    processedPayloadsCount: 0,\n    operationAvailability: operationAvailability,\n    getValue: function getValue() {\n      return currentValue;\n    },\n    setValue: function setValue(val) {\n      currentValue = val;\n    },\n    setNetworkSubscription: function setNetworkSubscription(subscription) {\n      if (isLiveQuery && currentNetworkSubscription != null) {\n        currentNetworkSubscription.unsubscribe();\n      }\n      currentNetworkSubscription = subscription;\n    },\n    temporaryRetain: function temporaryRetain(environment) {\n      return suspenseResource.temporaryRetain(environment);\n    },\n    permanentRetain: function permanentRetain(environment) {\n      return suspenseResource.permanentRetain(environment);\n    },\n    releaseTemporaryRetain: function releaseTemporaryRetain() {\n      suspenseResource.releaseTemporaryRetain();\n    }\n  };\n  return cacheEntry;\n}\nvar QueryResourceImpl = /*#__PURE__*/function () {\n  function QueryResourceImpl(environment) {\n    var _this = this;\n    (0, _defineProperty2[\"default\"])(this, \"_clearCacheEntry\", function (cacheEntry) {\n      _this._cache[\"delete\"](cacheEntry.cacheIdentifier);\n    });\n    this._environment = environment;\n    this._cache = LRUCache.create(CACHE_CAPACITY);\n  }\n  var _proto = QueryResourceImpl.prototype;\n  _proto.prepare = function prepare(operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, cacheBreaker, profilerContext) {\n    var cacheIdentifier = getQueryCacheIdentifier(this._environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker);\n    return this.prepareWithIdentifier(cacheIdentifier, operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, profilerContext);\n  };\n  _proto.prepareWithIdentifier = function prepareWithIdentifier(cacheIdentifier, operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, profilerContext) {\n    var environment = this._environment;\n    var fetchPolicy = maybeFetchPolicy !== null && maybeFetchPolicy !== void 0 ? maybeFetchPolicy : operationIsLiveQuery(operation) ? DEFAULT_LIVE_FETCH_POLICY : DEFAULT_FETCH_POLICY;\n    var renderPolicy = maybeRenderPolicy !== null && maybeRenderPolicy !== void 0 ? maybeRenderPolicy : environment.UNSTABLE_getDefaultRenderPolicy();\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    var temporaryRetainDisposable = null;\n    var entryWasCached = cacheEntry != null;\n    if (cacheEntry == null) {\n      cacheEntry = this._fetchAndSaveQuery(cacheIdentifier, operation, fetchObservable, fetchPolicy, renderPolicy, profilerContext, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, observer), {}, {\n        unsubscribe: function unsubscribe(subscription) {\n          if (temporaryRetainDisposable != null) {\n            temporaryRetainDisposable.dispose();\n          }\n          var observerUnsubscribe = observer === null || observer === void 0 ? void 0 : observer.unsubscribe;\n          observerUnsubscribe && observerUnsubscribe(subscription);\n        }\n      }));\n    }\n    temporaryRetainDisposable = cacheEntry.temporaryRetain(environment);\n    var cachedValue = cacheEntry.getValue();\n    if (isPromise(cachedValue)) {\n      environment.__log({\n        name: 'suspense.query',\n        fetchPolicy: fetchPolicy,\n        isPromiseCached: entryWasCached,\n        operation: operation,\n        queryAvailability: cacheEntry.operationAvailability,\n        renderPolicy: renderPolicy\n      });\n      throw cachedValue;\n    }\n    if (cachedValue instanceof Error) {\n      throw cachedValue;\n    }\n    return cachedValue;\n  };\n  _proto.retain = function retain(queryResult, profilerContext) {\n    var environment = this._environment;\n    var cacheIdentifier = queryResult.cacheIdentifier,\n      operation = queryResult.operation;\n    var cacheEntry = this._getOrCreateCacheEntry(cacheIdentifier, operation, null, queryResult, null);\n    var disposable = cacheEntry.permanentRetain(environment);\n    environment.__log({\n      name: 'queryresource.retain',\n      profilerContext: profilerContext,\n      resourceID: cacheEntry.id\n    });\n    return {\n      dispose: function dispose() {\n        disposable.dispose();\n      }\n    };\n  };\n  _proto.releaseTemporaryRetain = function releaseTemporaryRetain(queryResult) {\n    var cacheEntry = this._cache.get(queryResult.cacheIdentifier);\n    if (cacheEntry != null) {\n      cacheEntry.releaseTemporaryRetain();\n    }\n  };\n  _proto.TESTS_ONLY__getCacheEntry = function TESTS_ONLY__getCacheEntry(operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker) {\n    var environment = this._environment;\n    var cacheIdentifier = getQueryCacheIdentifier(environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker);\n    return this._cache.get(cacheIdentifier);\n  };\n  _proto._getOrCreateCacheEntry = function _getOrCreateCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription) {\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    if (cacheEntry == null) {\n      cacheEntry = createCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription, this._clearCacheEntry);\n      this._cache.set(cacheIdentifier, cacheEntry);\n    }\n    return cacheEntry;\n  };\n  _proto._fetchAndSaveQuery = function _fetchAndSaveQuery(cacheIdentifier, operation, fetchObservable, fetchPolicy, renderPolicy, profilerContext, observer) {\n    var _this2 = this;\n    var environment = this._environment;\n    var queryAvailability = environment.check(operation);\n    var queryStatus = queryAvailability.status;\n    var hasFullQuery = queryStatus === 'available';\n    var canPartialRender = hasFullQuery || renderPolicy === 'partial' && queryStatus !== 'stale';\n    var shouldFetch;\n    var shouldAllowRender;\n    var resolveNetworkPromise = function resolveNetworkPromise() {};\n    switch (fetchPolicy) {\n      case 'store-only':\n        {\n          shouldFetch = false;\n          shouldAllowRender = true;\n          break;\n        }\n      case 'store-or-network':\n        {\n          shouldFetch = !hasFullQuery;\n          shouldAllowRender = canPartialRender;\n          break;\n        }\n      case 'store-and-network':\n        {\n          shouldFetch = true;\n          shouldAllowRender = canPartialRender;\n          break;\n        }\n      case 'network-only':\n      default:\n        {\n          shouldFetch = true;\n          shouldAllowRender = false;\n          break;\n        }\n    }\n    if (shouldAllowRender) {\n      var queryResult = getQueryResult(operation, cacheIdentifier);\n      var _cacheEntry = createCacheEntry(cacheIdentifier, operation, queryAvailability, queryResult, null, this._clearCacheEntry);\n      this._cache.set(cacheIdentifier, _cacheEntry);\n    }\n    if (shouldFetch) {\n      var _queryResult = getQueryResult(operation, cacheIdentifier);\n      var networkSubscription;\n      fetchObservable.subscribe({\n        start: function start(subscription) {\n          networkSubscription = subscription;\n          var cacheEntry = _this2._cache.get(cacheIdentifier);\n          if (cacheEntry) {\n            cacheEntry.setNetworkSubscription(networkSubscription);\n          }\n          var observerStart = observer === null || observer === void 0 ? void 0 : observer.start;\n          if (observerStart) {\n            var subscriptionWithConditionalCancelation = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, subscription), {}, {\n              unsubscribe: function unsubscribe() {\n                if (operationIsLiveQuery(operation)) {\n                  subscription.unsubscribe();\n                }\n              }\n            });\n            observerStart(subscriptionWithConditionalCancelation);\n          }\n        },\n        next: function next() {\n          var cacheEntry = _this2._getOrCreateCacheEntry(cacheIdentifier, operation, queryAvailability, _queryResult, networkSubscription);\n          cacheEntry.processedPayloadsCount += 1;\n          cacheEntry.setValue(_queryResult);\n          resolveNetworkPromise();\n          var observerNext = observer === null || observer === void 0 ? void 0 : observer.next;\n          if (observerNext != null) {\n            var snapshot = environment.lookup(operation.fragment);\n            observerNext(snapshot);\n          }\n        },\n        error: function error(_error) {\n          var cacheEntry = _this2._getOrCreateCacheEntry(cacheIdentifier, operation, queryAvailability, _error, networkSubscription);\n          if (cacheEntry.processedPayloadsCount === 0) {\n            cacheEntry.setValue(_error);\n          } else {\n            process.env.NODE_ENV !== \"production\" ? warning(false, 'QueryResource: An incremental payload for query `%s` returned an error: `%s`.', operation.fragment.node.name, String(_error.message)) : void 0;\n          }\n          resolveNetworkPromise();\n          networkSubscription = null;\n          cacheEntry.setNetworkSubscription(null);\n          var observerError = observer === null || observer === void 0 ? void 0 : observer.error;\n          observerError && observerError(_error);\n        },\n        complete: function complete() {\n          resolveNetworkPromise();\n          networkSubscription = null;\n          var cacheEntry = _this2._cache.get(cacheIdentifier);\n          if (cacheEntry) {\n            cacheEntry.setNetworkSubscription(null);\n          }\n          var observerComplete = observer === null || observer === void 0 ? void 0 : observer.complete;\n          observerComplete && observerComplete();\n        },\n        unsubscribe: observer === null || observer === void 0 ? void 0 : observer.unsubscribe\n      });\n      var _cacheEntry2 = this._cache.get(cacheIdentifier);\n      if (!_cacheEntry2) {\n        var networkPromise = new Promise(function (resolve) {\n          resolveNetworkPromise = resolve;\n        });\n        networkPromise.displayName = 'Relay(' + operation.fragment.node.name + ')';\n        _cacheEntry2 = createCacheEntry(cacheIdentifier, operation, queryAvailability, networkPromise, networkSubscription, this._clearCacheEntry);\n        this._cache.set(cacheIdentifier, _cacheEntry2);\n      }\n    } else {\n      var observerComplete = observer === null || observer === void 0 ? void 0 : observer.complete;\n      observerComplete && observerComplete();\n    }\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    !(cacheEntry != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to have cached a result when attempting to fetch query.' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n    environment.__log({\n      name: 'queryresource.fetch',\n      resourceID: cacheEntry.id,\n      operation: operation,\n      profilerContext: profilerContext,\n      fetchPolicy: fetchPolicy,\n      renderPolicy: renderPolicy,\n      queryAvailability: queryAvailability,\n      shouldFetch: shouldFetch\n    });\n    return cacheEntry;\n  };\n  return QueryResourceImpl;\n}();\nfunction createQueryResource(environment) {\n  return new QueryResourceImpl(environment);\n}\nvar dataResources = WEAKMAP_SUPPORTED ? new WeakMap() : new Map();\nfunction getQueryResourceForEnvironment(environment) {\n  var cached = dataResources.get(environment);\n  if (cached) {\n    return cached;\n  }\n  var newDataResource = createQueryResource(environment);\n  dataResources.set(environment, newDataResource);\n  return newDataResource;\n}\nmodule.exports = {\n  createQueryResource: createQueryResource,\n  getQueryResourceForEnvironment: getQueryResourceForEnvironment,\n  getQueryCacheIdentifier: getQueryCacheIdentifier\n};","map":{"version":3,"names":["_interopRequireDefault","require","_objectSpread2","_defineProperty2","LRUCache","SuspenseResource","invariant","_require","isPromise","warning","CACHE_CAPACITY","DEFAULT_FETCH_POLICY","DEFAULT_LIVE_FETCH_POLICY","WEAKMAP_SUPPORTED","WeakMap","operationIsLiveQuery","operation","request","node","params","metadata","live","undefined","getQueryCacheIdentifier","environment","maybeFetchPolicy","maybeRenderPolicy","cacheBreaker","fetchPolicy","renderPolicy","UNSTABLE_getDefaultRenderPolicy","cacheIdentifier","concat","identifier","getQueryResult","rootFragmentRef","__id","fragment","dataID","__fragments","name","variables","__fragmentOwner","fragmentNode","fragmentRef","nextID","createCacheEntry","operationAvailability","value","networkSubscription","onDispose","isLiveQuery","currentValue","currentNetworkSubscription","suspenseResource","retention","retain","dispose","unsubscribe","cacheEntry","id","processedPayloadsCount","getValue","setValue","val","setNetworkSubscription","subscription","temporaryRetain","permanentRetain","releaseTemporaryRetain","QueryResourceImpl","_this","_cache","_environment","create","_proto","prototype","prepare","fetchObservable","observer","profilerContext","prepareWithIdentifier","get","temporaryRetainDisposable","entryWasCached","_fetchAndSaveQuery","observerUnsubscribe","cachedValue","__log","isPromiseCached","queryAvailability","Error","queryResult","_getOrCreateCacheEntry","disposable","resourceID","TESTS_ONLY__getCacheEntry","_clearCacheEntry","set","_this2","check","queryStatus","status","hasFullQuery","canPartialRender","shouldFetch","shouldAllowRender","resolveNetworkPromise","_cacheEntry","_queryResult","subscribe","start","observerStart","subscriptionWithConditionalCancelation","next","observerNext","snapshot","lookup","error","_error","process","env","NODE_ENV","String","message","observerError","complete","observerComplete","_cacheEntry2","networkPromise","Promise","resolve","displayName","createQueryResource","dataResources","Map","getQueryResourceForEnvironment","cached","newDataResource","module","exports"],"sources":["/Users/joaoluismoraes/Desktop/woovi-challenge/web/node_modules/react-relay/lib/relay-hooks/QueryResource.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar LRUCache = require('./LRUCache');\nvar SuspenseResource = require('./SuspenseResource');\nvar invariant = require('invariant');\nvar _require = require('relay-runtime'),\n  isPromise = _require.isPromise;\nvar warning = require(\"fbjs/lib/warning\");\nvar CACHE_CAPACITY = 1000;\nvar DEFAULT_FETCH_POLICY = 'store-or-network';\nvar DEFAULT_LIVE_FETCH_POLICY = 'store-and-network';\nvar WEAKMAP_SUPPORTED = typeof WeakMap === 'function';\nfunction operationIsLiveQuery(operation) {\n  return operation.request.node.params.metadata.live !== undefined;\n}\nfunction getQueryCacheIdentifier(environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker) {\n  var fetchPolicy = maybeFetchPolicy !== null && maybeFetchPolicy !== void 0 ? maybeFetchPolicy : operationIsLiveQuery(operation) ? DEFAULT_LIVE_FETCH_POLICY : DEFAULT_FETCH_POLICY;\n  var renderPolicy = maybeRenderPolicy !== null && maybeRenderPolicy !== void 0 ? maybeRenderPolicy : environment.UNSTABLE_getDefaultRenderPolicy();\n  var cacheIdentifier = \"\".concat(fetchPolicy, \"-\").concat(renderPolicy, \"-\").concat(operation.request.identifier);\n  if (cacheBreaker != null) {\n    return \"\".concat(cacheIdentifier, \"-\").concat(cacheBreaker);\n  }\n  return cacheIdentifier;\n}\nfunction getQueryResult(operation, cacheIdentifier) {\n  var rootFragmentRef = {\n    __id: operation.fragment.dataID,\n    __fragments: (0, _defineProperty2[\"default\"])({}, operation.fragment.node.name, operation.request.variables),\n    __fragmentOwner: operation.request\n  };\n  return {\n    cacheIdentifier: cacheIdentifier,\n    fragmentNode: operation.request.node.fragment,\n    fragmentRef: rootFragmentRef,\n    operation: operation\n  };\n}\nvar nextID = 200000;\nfunction createCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription, onDispose) {\n  var isLiveQuery = operationIsLiveQuery(operation);\n  var currentValue = value;\n  var currentNetworkSubscription = networkSubscription;\n  var suspenseResource = new SuspenseResource(function (environment) {\n    var retention = environment.retain(operation);\n    return {\n      dispose: function dispose() {\n        if (isLiveQuery && currentNetworkSubscription != null) {\n          currentNetworkSubscription.unsubscribe();\n        }\n        retention.dispose();\n        onDispose(cacheEntry);\n      }\n    };\n  });\n  var cacheEntry = {\n    cacheIdentifier: cacheIdentifier,\n    id: nextID++,\n    processedPayloadsCount: 0,\n    operationAvailability: operationAvailability,\n    getValue: function getValue() {\n      return currentValue;\n    },\n    setValue: function setValue(val) {\n      currentValue = val;\n    },\n    setNetworkSubscription: function setNetworkSubscription(subscription) {\n      if (isLiveQuery && currentNetworkSubscription != null) {\n        currentNetworkSubscription.unsubscribe();\n      }\n      currentNetworkSubscription = subscription;\n    },\n    temporaryRetain: function temporaryRetain(environment) {\n      return suspenseResource.temporaryRetain(environment);\n    },\n    permanentRetain: function permanentRetain(environment) {\n      return suspenseResource.permanentRetain(environment);\n    },\n    releaseTemporaryRetain: function releaseTemporaryRetain() {\n      suspenseResource.releaseTemporaryRetain();\n    }\n  };\n  return cacheEntry;\n}\nvar QueryResourceImpl = /*#__PURE__*/function () {\n  function QueryResourceImpl(environment) {\n    var _this = this;\n    (0, _defineProperty2[\"default\"])(this, \"_clearCacheEntry\", function (cacheEntry) {\n      _this._cache[\"delete\"](cacheEntry.cacheIdentifier);\n    });\n    this._environment = environment;\n    this._cache = LRUCache.create(CACHE_CAPACITY);\n  }\n  var _proto = QueryResourceImpl.prototype;\n  _proto.prepare = function prepare(operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, cacheBreaker, profilerContext) {\n    var cacheIdentifier = getQueryCacheIdentifier(this._environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker);\n    return this.prepareWithIdentifier(cacheIdentifier, operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, profilerContext);\n  };\n  _proto.prepareWithIdentifier = function prepareWithIdentifier(cacheIdentifier, operation, fetchObservable, maybeFetchPolicy, maybeRenderPolicy, observer, profilerContext) {\n    var environment = this._environment;\n    var fetchPolicy = maybeFetchPolicy !== null && maybeFetchPolicy !== void 0 ? maybeFetchPolicy : operationIsLiveQuery(operation) ? DEFAULT_LIVE_FETCH_POLICY : DEFAULT_FETCH_POLICY;\n    var renderPolicy = maybeRenderPolicy !== null && maybeRenderPolicy !== void 0 ? maybeRenderPolicy : environment.UNSTABLE_getDefaultRenderPolicy();\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    var temporaryRetainDisposable = null;\n    var entryWasCached = cacheEntry != null;\n    if (cacheEntry == null) {\n      cacheEntry = this._fetchAndSaveQuery(cacheIdentifier, operation, fetchObservable, fetchPolicy, renderPolicy, profilerContext, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, observer), {}, {\n        unsubscribe: function unsubscribe(subscription) {\n          if (temporaryRetainDisposable != null) {\n            temporaryRetainDisposable.dispose();\n          }\n          var observerUnsubscribe = observer === null || observer === void 0 ? void 0 : observer.unsubscribe;\n          observerUnsubscribe && observerUnsubscribe(subscription);\n        }\n      }));\n    }\n    temporaryRetainDisposable = cacheEntry.temporaryRetain(environment);\n    var cachedValue = cacheEntry.getValue();\n    if (isPromise(cachedValue)) {\n      environment.__log({\n        name: 'suspense.query',\n        fetchPolicy: fetchPolicy,\n        isPromiseCached: entryWasCached,\n        operation: operation,\n        queryAvailability: cacheEntry.operationAvailability,\n        renderPolicy: renderPolicy\n      });\n      throw cachedValue;\n    }\n    if (cachedValue instanceof Error) {\n      throw cachedValue;\n    }\n    return cachedValue;\n  };\n  _proto.retain = function retain(queryResult, profilerContext) {\n    var environment = this._environment;\n    var cacheIdentifier = queryResult.cacheIdentifier,\n      operation = queryResult.operation;\n    var cacheEntry = this._getOrCreateCacheEntry(cacheIdentifier, operation, null, queryResult, null);\n    var disposable = cacheEntry.permanentRetain(environment);\n    environment.__log({\n      name: 'queryresource.retain',\n      profilerContext: profilerContext,\n      resourceID: cacheEntry.id\n    });\n    return {\n      dispose: function dispose() {\n        disposable.dispose();\n      }\n    };\n  };\n  _proto.releaseTemporaryRetain = function releaseTemporaryRetain(queryResult) {\n    var cacheEntry = this._cache.get(queryResult.cacheIdentifier);\n    if (cacheEntry != null) {\n      cacheEntry.releaseTemporaryRetain();\n    }\n  };\n  _proto.TESTS_ONLY__getCacheEntry = function TESTS_ONLY__getCacheEntry(operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker) {\n    var environment = this._environment;\n    var cacheIdentifier = getQueryCacheIdentifier(environment, operation, maybeFetchPolicy, maybeRenderPolicy, cacheBreaker);\n    return this._cache.get(cacheIdentifier);\n  };\n  _proto._getOrCreateCacheEntry = function _getOrCreateCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription) {\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    if (cacheEntry == null) {\n      cacheEntry = createCacheEntry(cacheIdentifier, operation, operationAvailability, value, networkSubscription, this._clearCacheEntry);\n      this._cache.set(cacheIdentifier, cacheEntry);\n    }\n    return cacheEntry;\n  };\n  _proto._fetchAndSaveQuery = function _fetchAndSaveQuery(cacheIdentifier, operation, fetchObservable, fetchPolicy, renderPolicy, profilerContext, observer) {\n    var _this2 = this;\n    var environment = this._environment;\n    var queryAvailability = environment.check(operation);\n    var queryStatus = queryAvailability.status;\n    var hasFullQuery = queryStatus === 'available';\n    var canPartialRender = hasFullQuery || renderPolicy === 'partial' && queryStatus !== 'stale';\n    var shouldFetch;\n    var shouldAllowRender;\n    var resolveNetworkPromise = function resolveNetworkPromise() {};\n    switch (fetchPolicy) {\n      case 'store-only':\n        {\n          shouldFetch = false;\n          shouldAllowRender = true;\n          break;\n        }\n      case 'store-or-network':\n        {\n          shouldFetch = !hasFullQuery;\n          shouldAllowRender = canPartialRender;\n          break;\n        }\n      case 'store-and-network':\n        {\n          shouldFetch = true;\n          shouldAllowRender = canPartialRender;\n          break;\n        }\n      case 'network-only':\n      default:\n        {\n          shouldFetch = true;\n          shouldAllowRender = false;\n          break;\n        }\n    }\n    if (shouldAllowRender) {\n      var queryResult = getQueryResult(operation, cacheIdentifier);\n      var _cacheEntry = createCacheEntry(cacheIdentifier, operation, queryAvailability, queryResult, null, this._clearCacheEntry);\n      this._cache.set(cacheIdentifier, _cacheEntry);\n    }\n    if (shouldFetch) {\n      var _queryResult = getQueryResult(operation, cacheIdentifier);\n      var networkSubscription;\n      fetchObservable.subscribe({\n        start: function start(subscription) {\n          networkSubscription = subscription;\n          var cacheEntry = _this2._cache.get(cacheIdentifier);\n          if (cacheEntry) {\n            cacheEntry.setNetworkSubscription(networkSubscription);\n          }\n          var observerStart = observer === null || observer === void 0 ? void 0 : observer.start;\n          if (observerStart) {\n            var subscriptionWithConditionalCancelation = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, subscription), {}, {\n              unsubscribe: function unsubscribe() {\n                if (operationIsLiveQuery(operation)) {\n                  subscription.unsubscribe();\n                }\n              }\n            });\n            observerStart(subscriptionWithConditionalCancelation);\n          }\n        },\n        next: function next() {\n          var cacheEntry = _this2._getOrCreateCacheEntry(cacheIdentifier, operation, queryAvailability, _queryResult, networkSubscription);\n          cacheEntry.processedPayloadsCount += 1;\n          cacheEntry.setValue(_queryResult);\n          resolveNetworkPromise();\n          var observerNext = observer === null || observer === void 0 ? void 0 : observer.next;\n          if (observerNext != null) {\n            var snapshot = environment.lookup(operation.fragment);\n            observerNext(snapshot);\n          }\n        },\n        error: function error(_error) {\n          var cacheEntry = _this2._getOrCreateCacheEntry(cacheIdentifier, operation, queryAvailability, _error, networkSubscription);\n          if (cacheEntry.processedPayloadsCount === 0) {\n            cacheEntry.setValue(_error);\n          } else {\n            process.env.NODE_ENV !== \"production\" ? warning(false, 'QueryResource: An incremental payload for query `%s` returned an error: `%s`.', operation.fragment.node.name, String(_error.message)) : void 0;\n          }\n          resolveNetworkPromise();\n          networkSubscription = null;\n          cacheEntry.setNetworkSubscription(null);\n          var observerError = observer === null || observer === void 0 ? void 0 : observer.error;\n          observerError && observerError(_error);\n        },\n        complete: function complete() {\n          resolveNetworkPromise();\n          networkSubscription = null;\n          var cacheEntry = _this2._cache.get(cacheIdentifier);\n          if (cacheEntry) {\n            cacheEntry.setNetworkSubscription(null);\n          }\n          var observerComplete = observer === null || observer === void 0 ? void 0 : observer.complete;\n          observerComplete && observerComplete();\n        },\n        unsubscribe: observer === null || observer === void 0 ? void 0 : observer.unsubscribe\n      });\n      var _cacheEntry2 = this._cache.get(cacheIdentifier);\n      if (!_cacheEntry2) {\n        var networkPromise = new Promise(function (resolve) {\n          resolveNetworkPromise = resolve;\n        });\n        networkPromise.displayName = 'Relay(' + operation.fragment.node.name + ')';\n        _cacheEntry2 = createCacheEntry(cacheIdentifier, operation, queryAvailability, networkPromise, networkSubscription, this._clearCacheEntry);\n        this._cache.set(cacheIdentifier, _cacheEntry2);\n      }\n    } else {\n      var observerComplete = observer === null || observer === void 0 ? void 0 : observer.complete;\n      observerComplete && observerComplete();\n    }\n    var cacheEntry = this._cache.get(cacheIdentifier);\n    !(cacheEntry != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to have cached a result when attempting to fetch query.' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n    environment.__log({\n      name: 'queryresource.fetch',\n      resourceID: cacheEntry.id,\n      operation: operation,\n      profilerContext: profilerContext,\n      fetchPolicy: fetchPolicy,\n      renderPolicy: renderPolicy,\n      queryAvailability: queryAvailability,\n      shouldFetch: shouldFetch\n    });\n    return cacheEntry;\n  };\n  return QueryResourceImpl;\n}();\nfunction createQueryResource(environment) {\n  return new QueryResourceImpl(environment);\n}\nvar dataResources = WEAKMAP_SUPPORTED ? new WeakMap() : new Map();\nfunction getQueryResourceForEnvironment(environment) {\n  var cached = dataResources.get(environment);\n  if (cached) {\n    return cached;\n  }\n  var newDataResource = createQueryResource(environment);\n  dataResources.set(environment, newDataResource);\n  return newDataResource;\n}\nmodule.exports = {\n  createQueryResource: createQueryResource,\n  getQueryResourceForEnvironment: getQueryResourceForEnvironment,\n  getQueryCacheIdentifier: getQueryCacheIdentifier\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}