{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar LRUCache = require('./LRUCache');\nvar _require = require('./QueryResource'),\n  getQueryResourceForEnvironment = _require.getQueryResourceForEnvironment;\nvar SuspenseResource = require('./SuspenseResource');\nvar invariant = require('invariant');\nvar _require2 = require('relay-runtime'),\n  _require2$__internal = _require2.__internal,\n  fetchQuery = _require2$__internal.fetchQuery,\n  getPromiseForActiveRequest = _require2$__internal.getPromiseForActiveRequest,\n  RelayFeatureFlags = _require2.RelayFeatureFlags,\n  createOperationDescriptor = _require2.createOperationDescriptor,\n  getFragmentIdentifier = _require2.getFragmentIdentifier,\n  getPendingOperationsForFragment = _require2.getPendingOperationsForFragment,\n  getSelector = _require2.getSelector,\n  getVariablesFromFragment = _require2.getVariablesFromFragment,\n  handlePotentialSnapshotErrors = _require2.handlePotentialSnapshotErrors,\n  isPromise = _require2.isPromise,\n  recycleNodesInto = _require2.recycleNodesInto;\nvar WEAKMAP_SUPPORTED = typeof WeakMap === 'function';\nvar CACHE_CAPACITY = 1000000;\nvar CONSTANT_READONLY_EMPTY_ARRAY = Object.freeze([]);\nfunction isMissingData(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      return s.isMissingData;\n    });\n  }\n  return snapshot.isMissingData;\n}\nfunction hasMissingClientEdges(snapshot) {\n  var _snapshot$missingClie, _snapshot$missingClie2;\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      var _s$missingClientEdges, _s$missingClientEdges2;\n      return ((_s$missingClientEdges = (_s$missingClientEdges2 = s.missingClientEdges) === null || _s$missingClientEdges2 === void 0 ? void 0 : _s$missingClientEdges2.length) !== null && _s$missingClientEdges !== void 0 ? _s$missingClientEdges : 0) > 0;\n    });\n  }\n  return ((_snapshot$missingClie = (_snapshot$missingClie2 = snapshot.missingClientEdges) === null || _snapshot$missingClie2 === void 0 ? void 0 : _snapshot$missingClie2.length) !== null && _snapshot$missingClie !== void 0 ? _snapshot$missingClie : 0) > 0;\n}\nfunction missingLiveResolverFields(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.map(function (s) {\n      return s.missingLiveResolverFields;\n    }).filter(Boolean).flat();\n  }\n  return snapshot.missingLiveResolverFields;\n}\nfunction singularOrPluralForEach(snapshot, f) {\n  if (Array.isArray(snapshot)) {\n    snapshot.forEach(f);\n  } else {\n    f(snapshot);\n  }\n}\nfunction getFragmentResult(cacheKey, snapshot, storeEpoch) {\n  if (Array.isArray(snapshot)) {\n    return {\n      cacheKey: cacheKey,\n      snapshot: snapshot,\n      data: snapshot.map(function (s) {\n        return s.data;\n      }),\n      isMissingData: isMissingData(snapshot),\n      storeEpoch: storeEpoch\n    };\n  }\n  return {\n    cacheKey: cacheKey,\n    snapshot: snapshot,\n    data: snapshot.data,\n    isMissingData: isMissingData(snapshot),\n    storeEpoch: storeEpoch\n  };\n}\nvar ClientEdgeQueryResultsCache = /*#__PURE__*/function () {\n  function ClientEdgeQueryResultsCache(environment) {\n    (0, _defineProperty2[\"default\"])(this, \"_cache\", new Map());\n    (0, _defineProperty2[\"default\"])(this, \"_retainCounts\", new Map());\n    this._environment = environment;\n  }\n  var _proto = ClientEdgeQueryResultsCache.prototype;\n  _proto.get = function get(fragmentIdentifier) {\n    var _this$_cache$get$, _this$_cache$get;\n    return (_this$_cache$get$ = (_this$_cache$get = this._cache.get(fragmentIdentifier)) === null || _this$_cache$get === void 0 ? void 0 : _this$_cache$get[0]) !== null && _this$_cache$get$ !== void 0 ? _this$_cache$get$ : undefined;\n  };\n  _proto.recordQueryResults = function recordQueryResults(fragmentIdentifier, value) {\n    var _this = this;\n    var existing = this._cache.get(fragmentIdentifier);\n    if (!existing) {\n      var suspenseResource = new SuspenseResource(function () {\n        return _this._retain(fragmentIdentifier);\n      });\n      this._cache.set(fragmentIdentifier, [value, suspenseResource]);\n      suspenseResource.temporaryRetain(this._environment);\n    } else {\n      var existingResults = existing[0],\n        _suspenseResource = existing[1];\n      value.forEach(function (queryResult) {\n        existingResults.push(queryResult);\n      });\n      _suspenseResource.temporaryRetain(this._environment);\n    }\n  };\n  _proto._retain = function _retain(id) {\n    var _this2 = this;\n    var _this$_retainCounts$g;\n    var retainCount = ((_this$_retainCounts$g = this._retainCounts.get(id)) !== null && _this$_retainCounts$g !== void 0 ? _this$_retainCounts$g : 0) + 1;\n    this._retainCounts.set(id, retainCount);\n    return {\n      dispose: function dispose() {\n        var _this$_retainCounts$g2;\n        var newRetainCount = ((_this$_retainCounts$g2 = _this2._retainCounts.get(id)) !== null && _this$_retainCounts$g2 !== void 0 ? _this$_retainCounts$g2 : 0) - 1;\n        if (newRetainCount > 0) {\n          _this2._retainCounts.set(id, newRetainCount);\n        } else {\n          _this2._retainCounts[\"delete\"](id);\n          _this2._cache[\"delete\"](id);\n        }\n      }\n    };\n  };\n  return ClientEdgeQueryResultsCache;\n}();\nvar FragmentResourceImpl = /*#__PURE__*/function () {\n  function FragmentResourceImpl(environment) {\n    this._environment = environment;\n    this._cache = LRUCache.create(CACHE_CAPACITY);\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      this._clientEdgeQueryResultsCache = new ClientEdgeQueryResultsCache(environment);\n    }\n  }\n  var _proto2 = FragmentResourceImpl.prototype;\n  _proto2.read = function read(fragmentNode, fragmentRef, componentDisplayName, fragmentKey) {\n    return this.readWithIdentifier(fragmentNode, fragmentRef, getFragmentIdentifier(fragmentNode, fragmentRef), componentDisplayName, fragmentKey);\n  };\n  _proto2.readWithIdentifier = function readWithIdentifier(fragmentNode, fragmentRef, fragmentIdentifier, componentDisplayName, fragmentKey) {\n    var _this3 = this;\n    var _fragmentNode$metadat, _fragmentNode$metadat2, _missingLiveResolverF2, _missingLiveResolverF3;\n    var environment = this._environment;\n    if (fragmentRef == null) {\n      return {\n        cacheKey: fragmentIdentifier,\n        data: null,\n        isMissingData: false,\n        snapshot: null,\n        storeEpoch: 0\n      };\n    }\n    var storeEpoch = environment.getStore().getEpoch();\n    if ((fragmentNode === null || fragmentNode === void 0 ? void 0 : (_fragmentNode$metadat = fragmentNode.metadata) === null || _fragmentNode$metadat === void 0 ? void 0 : _fragmentNode$metadat.plural) === true) {\n      !Array.isArray(fragmentRef) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected fragment pointer%s for fragment `%s` to be ' + 'an array, instead got `%s`. Remove `@relay(plural: true)` ' + 'from fragment `%s` to allow the prop to be an object.', fragmentKey != null ? \" for key `\".concat(fragmentKey, \"`\") : '', fragmentNode.name, typeof fragmentRef, fragmentNode.name) : invariant(false) : void 0;\n      if (fragmentRef.length === 0) {\n        return {\n          cacheKey: fragmentIdentifier,\n          data: CONSTANT_READONLY_EMPTY_ARRAY,\n          isMissingData: false,\n          snapshot: CONSTANT_READONLY_EMPTY_ARRAY,\n          storeEpoch: storeEpoch\n        };\n      }\n    }\n    var cachedValue = this._cache.get(fragmentIdentifier);\n    if (cachedValue != null) {\n      var _missingLiveResolverF;\n      if (cachedValue.kind === 'pending' && isPromise(cachedValue.promise)) {\n        environment.__log({\n          name: 'suspense.fragment',\n          data: cachedValue.result.data,\n          fragment: fragmentNode,\n          isRelayHooks: true,\n          isMissingData: cachedValue.result.isMissingData,\n          isPromiseCached: true,\n          pendingOperations: cachedValue.pendingOperations\n        });\n        throw cachedValue.promise;\n      }\n      if (cachedValue.kind === 'done' && cachedValue.result.snapshot && !((_missingLiveResolverF = missingLiveResolverFields(cachedValue.result.snapshot)) !== null && _missingLiveResolverF !== void 0 && _missingLiveResolverF.length)) {\n        this._throwOrLogErrorsInSnapshot(cachedValue.result.snapshot);\n        if (cachedValue.result.isMissingData) {\n          environment.__log({\n            name: 'fragmentresource.missing_data',\n            data: cachedValue.result.data,\n            fragment: fragmentNode,\n            isRelayHooks: true,\n            cached: true\n          });\n        }\n        return cachedValue.result;\n      }\n    }\n    var fragmentSelector = getSelector(fragmentNode, fragmentRef);\n    !(fragmentSelector != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to receive an object where `...%s` was spread, ' + 'but the fragment reference was not found`. This is most ' + 'likely the result of:\\n' + \"- Forgetting to spread `%s` in `%s`'s parent's fragment.\\n\" + '- Conditionally fetching `%s` but unconditionally passing %s prop ' + 'to `%s`. If the parent fragment only fetches the fragment conditionally ' + '- with e.g. `@include`, `@skip`, or inside a `... on SomeType { }` ' + 'spread  - then the fragment reference will not exist. ' + 'In this case, pass `null` if the conditions for evaluating the ' + 'fragment are not met (e.g. if the `@include(if)` value is false.)', fragmentNode.name, fragmentNode.name, componentDisplayName, fragmentNode.name, fragmentKey == null ? 'a fragment reference' : \"the `\".concat(fragmentKey, \"`\"), componentDisplayName) : invariant(false) : void 0;\n    var fragmentResult = null;\n    var snapshot = null;\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && cachedValue != null && cachedValue.kind === 'missing') {\n      fragmentResult = cachedValue.result;\n      snapshot = cachedValue.snapshot;\n    } else {\n      snapshot = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors.map(function (s) {\n        return environment.lookup(s);\n      }) : environment.lookup(fragmentSelector);\n      fragmentResult = getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n    }\n    if (!fragmentResult.isMissingData) {\n      this._throwOrLogErrorsInSnapshot(snapshot);\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n      return fragmentResult;\n    }\n    var clientEdgeRequests = null;\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && ((_fragmentNode$metadat2 = fragmentNode.metadata) === null || _fragmentNode$metadat2 === void 0 ? void 0 : _fragmentNode$metadat2.hasClientEdges) === true && hasMissingClientEdges(snapshot)) {\n      clientEdgeRequests = [];\n      var queryResource = getQueryResourceForEnvironment(this._environment);\n      var queryResults = [];\n      singularOrPluralForEach(snapshot, function (snap) {\n        var _snap$missingClientEd;\n        (_snap$missingClientEd = snap.missingClientEdges) === null || _snap$missingClientEd === void 0 ? void 0 : _snap$missingClientEd.forEach(function (_ref) {\n          var _clientEdgeRequests;\n          var request = _ref.request,\n            clientEdgeDestinationID = _ref.clientEdgeDestinationID;\n          var _this3$_performClient = _this3._performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID),\n            queryResult = _this3$_performClient.queryResult,\n            requestDescriptor = _this3$_performClient.requestDescriptor;\n          queryResults.push(queryResult);\n          (_clientEdgeRequests = clientEdgeRequests) === null || _clientEdgeRequests === void 0 ? void 0 : _clientEdgeRequests.push(requestDescriptor);\n        });\n      });\n      !(this._clientEdgeQueryResultsCache != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Client edge query result cache should exist when ENABLE_CLIENT_EDGES is on.') : invariant(false) : void 0;\n      this._clientEdgeQueryResultsCache.recordQueryResults(fragmentIdentifier, queryResults);\n    }\n    var clientEdgePromises = [];\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && clientEdgeRequests) {\n      clientEdgePromises = clientEdgeRequests.map(function (request) {\n        return getPromiseForActiveRequest(_this3._environment, request);\n      }).filter(Boolean);\n    }\n    var fragmentOwner = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors[0].owner : fragmentSelector.owner;\n    var parentQueryPromiseResult = this._getAndSavePromiseForFragmentRequestInFlight(fragmentIdentifier, fragmentNode, fragmentOwner, fragmentResult);\n    var parentQueryPromiseResultPromise = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.promise;\n    var missingResolverFieldPromises = (_missingLiveResolverF2 = (_missingLiveResolverF3 = missingLiveResolverFields(snapshot)) === null || _missingLiveResolverF3 === void 0 ? void 0 : _missingLiveResolverF3.map(function (_ref2) {\n      var liveStateID = _ref2.liveStateID;\n      var store = environment.getStore();\n      return store.getLiveResolverPromise(liveStateID);\n    })) !== null && _missingLiveResolverF2 !== void 0 ? _missingLiveResolverF2 : [];\n    if (clientEdgePromises.length || missingResolverFieldPromises.length || isPromise(parentQueryPromiseResultPromise)) {\n      var _parentQueryPromiseRe, _clientEdgeRequests2;\n      environment.__log({\n        name: 'suspense.fragment',\n        data: fragmentResult.data,\n        fragment: fragmentNode,\n        isRelayHooks: true,\n        isPromiseCached: false,\n        isMissingData: fragmentResult.isMissingData,\n        pendingOperations: [].concat((0, _toConsumableArray2[\"default\"])((_parentQueryPromiseRe = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.pendingOperations) !== null && _parentQueryPromiseRe !== void 0 ? _parentQueryPromiseRe : []), (0, _toConsumableArray2[\"default\"])((_clientEdgeRequests2 = clientEdgeRequests) !== null && _clientEdgeRequests2 !== void 0 ? _clientEdgeRequests2 : []))\n      });\n      var promises = [];\n      if (clientEdgePromises.length > 0) {\n        promises = promises.concat(clientEdgePromises);\n      }\n      if (missingResolverFieldPromises.length > 0) {\n        promises = promises.concat(missingResolverFieldPromises);\n      }\n      if (promises.length > 0) {\n        if (parentQueryPromiseResultPromise) {\n          promises.push(parentQueryPromiseResultPromise);\n        }\n        throw Promise.all(promises);\n      }\n      if (parentQueryPromiseResultPromise) {\n        throw parentQueryPromiseResultPromise;\n      }\n    }\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && fragmentResult.isMissingData) {\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n    }\n    this._throwOrLogErrorsInSnapshot(snapshot);\n    environment.__log({\n      name: 'fragmentresource.missing_data',\n      data: fragmentResult.data,\n      fragment: fragmentNode,\n      isRelayHooks: true,\n      cached: false\n    });\n    return getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n  };\n  _proto2._performClientEdgeQuery = function _performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID) {\n    var originalVariables = getVariablesFromFragment(fragmentNode, fragmentRef);\n    var variables = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, originalVariables), {}, {\n      id: clientEdgeDestinationID\n    });\n    var operation = createOperationDescriptor(request, variables, {});\n    var fetchObservable = fetchQuery(this._environment, operation);\n    var queryResult = queryResource.prepare(operation, fetchObservable);\n    return {\n      requestDescriptor: operation.request,\n      queryResult: queryResult\n    };\n  };\n  _proto2._throwOrLogErrorsInSnapshot = function _throwOrLogErrorsInSnapshot(snapshot) {\n    var _this4 = this;\n    if (Array.isArray(snapshot)) {\n      snapshot.forEach(function (s) {\n        handlePotentialSnapshotErrors(_this4._environment, s.missingRequiredFields, s.relayResolverErrors);\n      });\n    } else {\n      handlePotentialSnapshotErrors(this._environment, snapshot.missingRequiredFields, snapshot.relayResolverErrors);\n    }\n  };\n  _proto2.readSpec = function readSpec(fragmentNodes, fragmentRefs, componentDisplayName) {\n    var result = {};\n    for (var key in fragmentNodes) {\n      result[key] = this.read(fragmentNodes[key], fragmentRefs[key], componentDisplayName, key);\n    }\n    return result;\n  };\n  _proto2.subscribe = function subscribe(fragmentResult, callback) {\n    var _this5 = this;\n    var environment = this._environment;\n    var cacheKey = fragmentResult.cacheKey;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return {\n        dispose: function dispose() {}\n      };\n    }\n    var _this$checkMissedUpda = this.checkMissedUpdates(fragmentResult),\n      didMissUpdates = _this$checkMissedUpda[0],\n      currentSnapshot = _this$checkMissedUpda[1];\n    if (didMissUpdates) {\n      callback();\n    }\n    var disposables = [];\n    if (Array.isArray(renderedSnapshot)) {\n      !Array.isArray(currentSnapshot) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshots to be plural. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      currentSnapshot.forEach(function (snapshot, idx) {\n        disposables.push(environment.subscribe(snapshot, function (latestSnapshot) {\n          var storeEpoch = environment.getStore().getEpoch();\n          _this5._updatePluralSnapshot(cacheKey, currentSnapshot, latestSnapshot, idx, storeEpoch);\n          callback();\n        }));\n      });\n    } else {\n      !(currentSnapshot != null && !Array.isArray(currentSnapshot)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshot to be singular. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      disposables.push(environment.subscribe(currentSnapshot, function (latestSnapshot) {\n        var storeEpoch = environment.getStore().getEpoch();\n        var result = getFragmentResult(cacheKey, latestSnapshot, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          _this5._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: latestSnapshot\n          });\n        } else {\n          _this5._cache.set(cacheKey, {\n            kind: 'done',\n            result: getFragmentResult(cacheKey, latestSnapshot, storeEpoch)\n          });\n        }\n        callback();\n      }));\n    }\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      var _this$_clientEdgeQuer, _this$_clientEdgeQuer2;\n      var clientEdgeQueryResults = (_this$_clientEdgeQuer = (_this$_clientEdgeQuer2 = this._clientEdgeQueryResultsCache) === null || _this$_clientEdgeQuer2 === void 0 ? void 0 : _this$_clientEdgeQuer2.get(cacheKey)) !== null && _this$_clientEdgeQuer !== void 0 ? _this$_clientEdgeQuer : undefined;\n      if (clientEdgeQueryResults !== null && clientEdgeQueryResults !== void 0 && clientEdgeQueryResults.length) {\n        var queryResource = getQueryResourceForEnvironment(this._environment);\n        clientEdgeQueryResults.forEach(function (queryResult) {\n          disposables.push(queryResource.retain(queryResult));\n        });\n      }\n    }\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (s) {\n          return s.dispose();\n        });\n        _this5._cache[\"delete\"](cacheKey);\n      }\n    };\n  };\n  _proto2.subscribeSpec = function subscribeSpec(fragmentResults, callback) {\n    var _this6 = this;\n    var disposables = Object.keys(fragmentResults).map(function (key) {\n      return _this6.subscribe(fragmentResults[key], callback);\n    });\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (disposable) {\n          disposable.dispose();\n        });\n      }\n    };\n  };\n  _proto2.checkMissedUpdates = function checkMissedUpdates(fragmentResult) {\n    var environment = this._environment;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return [false, null];\n    }\n    var storeEpoch = null;\n    storeEpoch = environment.getStore().getEpoch();\n    if (fragmentResult.storeEpoch === storeEpoch) {\n      return [false, fragmentResult.snapshot];\n    }\n    var cacheKey = fragmentResult.cacheKey;\n    if (Array.isArray(renderedSnapshot)) {\n      var didMissUpdates = false;\n      var currentSnapshots = [];\n      renderedSnapshot.forEach(function (snapshot, idx) {\n        var currentSnapshot = environment.lookup(snapshot.selector);\n        var renderData = snapshot.data;\n        var currentData = currentSnapshot.data;\n        var updatedData = recycleNodesInto(renderData, currentData);\n        if (updatedData !== renderData) {\n          currentSnapshot = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, currentSnapshot), {}, {\n            data: updatedData\n          });\n          didMissUpdates = true;\n        }\n        currentSnapshots[idx] = currentSnapshot;\n      });\n      if (didMissUpdates) {\n        var result = getFragmentResult(cacheKey, currentSnapshots, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          this._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: currentSnapshots\n          });\n        } else {\n          this._cache.set(cacheKey, {\n            kind: 'done',\n            result: result\n          });\n        }\n      }\n      return [didMissUpdates, currentSnapshots];\n    }\n    var currentSnapshot = environment.lookup(renderedSnapshot.selector);\n    var renderData = renderedSnapshot.data;\n    var currentData = currentSnapshot.data;\n    var updatedData = recycleNodesInto(renderData, currentData);\n    var updatedCurrentSnapshot = {\n      data: updatedData,\n      isMissingData: currentSnapshot.isMissingData,\n      missingClientEdges: currentSnapshot.missingClientEdges,\n      missingLiveResolverFields: currentSnapshot.missingLiveResolverFields,\n      seenRecords: currentSnapshot.seenRecords,\n      selector: currentSnapshot.selector,\n      missingRequiredFields: currentSnapshot.missingRequiredFields,\n      relayResolverErrors: currentSnapshot.relayResolverErrors\n    };\n    if (updatedData !== renderData) {\n      var _result = getFragmentResult(cacheKey, updatedCurrentSnapshot, storeEpoch);\n      if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && _result.isMissingData) {\n        this._cache.set(cacheKey, {\n          kind: 'missing',\n          result: _result,\n          snapshot: updatedCurrentSnapshot\n        });\n      } else {\n        this._cache.set(cacheKey, {\n          kind: 'done',\n          result: _result\n        });\n      }\n    }\n    return [updatedData !== renderData, updatedCurrentSnapshot];\n  };\n  _proto2.checkMissedUpdatesSpec = function checkMissedUpdatesSpec(fragmentResults) {\n    var _this7 = this;\n    return Object.keys(fragmentResults).some(function (key) {\n      return _this7.checkMissedUpdates(fragmentResults[key])[0];\n    });\n  };\n  _proto2._getAndSavePromiseForFragmentRequestInFlight = function _getAndSavePromiseForFragmentRequestInFlight(cacheKey, fragmentNode, fragmentOwner, fragmentResult) {\n    var _this8 = this;\n    var pendingOperationsResult = getPendingOperationsForFragment(this._environment, fragmentNode, fragmentOwner);\n    if (pendingOperationsResult == null) {\n      return null;\n    }\n    var networkPromise = pendingOperationsResult.promise;\n    var pendingOperations = pendingOperationsResult.pendingOperations;\n    var promise = networkPromise.then(function () {\n      _this8._cache[\"delete\"](cacheKey);\n    })[\"catch\"](function (error) {\n      _this8._cache[\"delete\"](cacheKey);\n    });\n    promise.displayName = networkPromise.displayName;\n    this._cache.set(cacheKey, {\n      kind: 'pending',\n      pendingOperations: pendingOperations,\n      promise: promise,\n      result: fragmentResult\n    });\n    return {\n      promise: promise,\n      pendingOperations: pendingOperations\n    };\n  };\n  _proto2._updatePluralSnapshot = function _updatePluralSnapshot(cacheKey, baseSnapshots, latestSnapshot, idx, storeEpoch) {\n    var _currentFragmentResul;\n    var currentFragmentResult = this._cache.get(cacheKey);\n    if (isPromise(currentFragmentResult)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var currentSnapshot = currentFragmentResult === null || currentFragmentResult === void 0 ? void 0 : (_currentFragmentResul = currentFragmentResult.result) === null || _currentFragmentResul === void 0 ? void 0 : _currentFragmentResul.snapshot;\n    if (currentSnapshot && !Array.isArray(currentSnapshot)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var nextSnapshots = currentSnapshot ? (0, _toConsumableArray2[\"default\"])(currentSnapshot) : (0, _toConsumableArray2[\"default\"])(baseSnapshots);\n    nextSnapshots[idx] = latestSnapshot;\n    var result = getFragmentResult(cacheKey, nextSnapshots, storeEpoch);\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n      this._cache.set(cacheKey, {\n        kind: 'missing',\n        result: result,\n        snapshot: nextSnapshots\n      });\n    } else {\n      this._cache.set(cacheKey, {\n        kind: 'done',\n        result: result\n      });\n    }\n  };\n  return FragmentResourceImpl;\n}();\nfunction reportInvalidCachedData(nodeName) {\n  !false ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to find cached data for plural fragment `%s` when ' + 'receiving a subscription. ' + \"If you're seeing this, this is likely a bug in Relay.\", nodeName) : invariant(false) : void 0;\n}\nfunction createFragmentResource(environment) {\n  return new FragmentResourceImpl(environment);\n}\nvar dataResources = WEAKMAP_SUPPORTED ? new WeakMap() : new Map();\nfunction getFragmentResourceForEnvironment(environment) {\n  var cached = dataResources.get(environment);\n  if (cached) {\n    return cached;\n  }\n  var newDataResource = createFragmentResource(environment);\n  dataResources.set(environment, newDataResource);\n  return newDataResource;\n}\nmodule.exports = {\n  createFragmentResource: createFragmentResource,\n  getFragmentResourceForEnvironment: getFragmentResourceForEnvironment\n};","map":{"version":3,"names":["_interopRequireDefault","require","_objectSpread2","_defineProperty2","_toConsumableArray2","LRUCache","_require","getQueryResourceForEnvironment","SuspenseResource","invariant","_require2","_require2$__internal","__internal","fetchQuery","getPromiseForActiveRequest","RelayFeatureFlags","createOperationDescriptor","getFragmentIdentifier","getPendingOperationsForFragment","getSelector","getVariablesFromFragment","handlePotentialSnapshotErrors","isPromise","recycleNodesInto","WEAKMAP_SUPPORTED","WeakMap","CACHE_CAPACITY","CONSTANT_READONLY_EMPTY_ARRAY","Object","freeze","isMissingData","snapshot","Array","isArray","some","s","hasMissingClientEdges","_snapshot$missingClie","_snapshot$missingClie2","_s$missingClientEdges","_s$missingClientEdges2","missingClientEdges","length","missingLiveResolverFields","map","filter","Boolean","flat","singularOrPluralForEach","f","forEach","getFragmentResult","cacheKey","storeEpoch","data","ClientEdgeQueryResultsCache","environment","Map","_environment","_proto","prototype","get","fragmentIdentifier","_this$_cache$get$","_this$_cache$get","_cache","undefined","recordQueryResults","value","_this","existing","suspenseResource","_retain","set","temporaryRetain","existingResults","_suspenseResource","queryResult","push","id","_this2","_this$_retainCounts$g","retainCount","_retainCounts","dispose","_this$_retainCounts$g2","newRetainCount","FragmentResourceImpl","create","ENABLE_CLIENT_EDGES","_clientEdgeQueryResultsCache","_proto2","read","fragmentNode","fragmentRef","componentDisplayName","fragmentKey","readWithIdentifier","_this3","_fragmentNode$metadat","_fragmentNode$metadat2","_missingLiveResolverF2","_missingLiveResolverF3","getStore","getEpoch","metadata","plural","process","env","NODE_ENV","concat","name","cachedValue","_missingLiveResolverF","kind","promise","__log","result","fragment","isRelayHooks","isPromiseCached","pendingOperations","_throwOrLogErrorsInSnapshot","cached","fragmentSelector","fragmentResult","ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE","selectors","lookup","clientEdgeRequests","hasClientEdges","queryResource","queryResults","snap","_snap$missingClientEd","_ref","_clientEdgeRequests","request","clientEdgeDestinationID","_this3$_performClient","_performClientEdgeQuery","requestDescriptor","clientEdgePromises","fragmentOwner","owner","parentQueryPromiseResult","_getAndSavePromiseForFragmentRequestInFlight","parentQueryPromiseResultPromise","missingResolverFieldPromises","_ref2","liveStateID","store","getLiveResolverPromise","_parentQueryPromiseRe","_clientEdgeRequests2","promises","Promise","all","originalVariables","variables","operation","fetchObservable","prepare","_this4","missingRequiredFields","relayResolverErrors","readSpec","fragmentNodes","fragmentRefs","key","subscribe","callback","_this5","renderedSnapshot","_this$checkMissedUpda","checkMissedUpdates","didMissUpdates","currentSnapshot","disposables","idx","latestSnapshot","_updatePluralSnapshot","_this$_clientEdgeQuer","_this$_clientEdgeQuer2","clientEdgeQueryResults","retain","subscribeSpec","fragmentResults","_this6","keys","disposable","currentSnapshots","selector","renderData","currentData","updatedData","updatedCurrentSnapshot","seenRecords","_result","checkMissedUpdatesSpec","_this7","_this8","pendingOperationsResult","networkPromise","then","error","displayName","baseSnapshots","_currentFragmentResul","currentFragmentResult","reportInvalidCachedData","node","nextSnapshots","nodeName","createFragmentResource","dataResources","getFragmentResourceForEnvironment","newDataResource","module","exports"],"sources":["/Users/joaoluismoraes/Desktop/woovi-challenge/web/node_modules/react-relay/lib/relay-hooks/FragmentResource.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar LRUCache = require('./LRUCache');\nvar _require = require('./QueryResource'),\n  getQueryResourceForEnvironment = _require.getQueryResourceForEnvironment;\nvar SuspenseResource = require('./SuspenseResource');\nvar invariant = require('invariant');\nvar _require2 = require('relay-runtime'),\n  _require2$__internal = _require2.__internal,\n  fetchQuery = _require2$__internal.fetchQuery,\n  getPromiseForActiveRequest = _require2$__internal.getPromiseForActiveRequest,\n  RelayFeatureFlags = _require2.RelayFeatureFlags,\n  createOperationDescriptor = _require2.createOperationDescriptor,\n  getFragmentIdentifier = _require2.getFragmentIdentifier,\n  getPendingOperationsForFragment = _require2.getPendingOperationsForFragment,\n  getSelector = _require2.getSelector,\n  getVariablesFromFragment = _require2.getVariablesFromFragment,\n  handlePotentialSnapshotErrors = _require2.handlePotentialSnapshotErrors,\n  isPromise = _require2.isPromise,\n  recycleNodesInto = _require2.recycleNodesInto;\nvar WEAKMAP_SUPPORTED = typeof WeakMap === 'function';\nvar CACHE_CAPACITY = 1000000;\nvar CONSTANT_READONLY_EMPTY_ARRAY = Object.freeze([]);\nfunction isMissingData(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      return s.isMissingData;\n    });\n  }\n  return snapshot.isMissingData;\n}\nfunction hasMissingClientEdges(snapshot) {\n  var _snapshot$missingClie, _snapshot$missingClie2;\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      var _s$missingClientEdges, _s$missingClientEdges2;\n      return ((_s$missingClientEdges = (_s$missingClientEdges2 = s.missingClientEdges) === null || _s$missingClientEdges2 === void 0 ? void 0 : _s$missingClientEdges2.length) !== null && _s$missingClientEdges !== void 0 ? _s$missingClientEdges : 0) > 0;\n    });\n  }\n  return ((_snapshot$missingClie = (_snapshot$missingClie2 = snapshot.missingClientEdges) === null || _snapshot$missingClie2 === void 0 ? void 0 : _snapshot$missingClie2.length) !== null && _snapshot$missingClie !== void 0 ? _snapshot$missingClie : 0) > 0;\n}\nfunction missingLiveResolverFields(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.map(function (s) {\n      return s.missingLiveResolverFields;\n    }).filter(Boolean).flat();\n  }\n  return snapshot.missingLiveResolverFields;\n}\nfunction singularOrPluralForEach(snapshot, f) {\n  if (Array.isArray(snapshot)) {\n    snapshot.forEach(f);\n  } else {\n    f(snapshot);\n  }\n}\nfunction getFragmentResult(cacheKey, snapshot, storeEpoch) {\n  if (Array.isArray(snapshot)) {\n    return {\n      cacheKey: cacheKey,\n      snapshot: snapshot,\n      data: snapshot.map(function (s) {\n        return s.data;\n      }),\n      isMissingData: isMissingData(snapshot),\n      storeEpoch: storeEpoch\n    };\n  }\n  return {\n    cacheKey: cacheKey,\n    snapshot: snapshot,\n    data: snapshot.data,\n    isMissingData: isMissingData(snapshot),\n    storeEpoch: storeEpoch\n  };\n}\nvar ClientEdgeQueryResultsCache = /*#__PURE__*/function () {\n  function ClientEdgeQueryResultsCache(environment) {\n    (0, _defineProperty2[\"default\"])(this, \"_cache\", new Map());\n    (0, _defineProperty2[\"default\"])(this, \"_retainCounts\", new Map());\n    this._environment = environment;\n  }\n  var _proto = ClientEdgeQueryResultsCache.prototype;\n  _proto.get = function get(fragmentIdentifier) {\n    var _this$_cache$get$, _this$_cache$get;\n    return (_this$_cache$get$ = (_this$_cache$get = this._cache.get(fragmentIdentifier)) === null || _this$_cache$get === void 0 ? void 0 : _this$_cache$get[0]) !== null && _this$_cache$get$ !== void 0 ? _this$_cache$get$ : undefined;\n  };\n  _proto.recordQueryResults = function recordQueryResults(fragmentIdentifier, value) {\n    var _this = this;\n    var existing = this._cache.get(fragmentIdentifier);\n    if (!existing) {\n      var suspenseResource = new SuspenseResource(function () {\n        return _this._retain(fragmentIdentifier);\n      });\n      this._cache.set(fragmentIdentifier, [value, suspenseResource]);\n      suspenseResource.temporaryRetain(this._environment);\n    } else {\n      var existingResults = existing[0],\n        _suspenseResource = existing[1];\n      value.forEach(function (queryResult) {\n        existingResults.push(queryResult);\n      });\n      _suspenseResource.temporaryRetain(this._environment);\n    }\n  };\n  _proto._retain = function _retain(id) {\n    var _this2 = this;\n    var _this$_retainCounts$g;\n    var retainCount = ((_this$_retainCounts$g = this._retainCounts.get(id)) !== null && _this$_retainCounts$g !== void 0 ? _this$_retainCounts$g : 0) + 1;\n    this._retainCounts.set(id, retainCount);\n    return {\n      dispose: function dispose() {\n        var _this$_retainCounts$g2;\n        var newRetainCount = ((_this$_retainCounts$g2 = _this2._retainCounts.get(id)) !== null && _this$_retainCounts$g2 !== void 0 ? _this$_retainCounts$g2 : 0) - 1;\n        if (newRetainCount > 0) {\n          _this2._retainCounts.set(id, newRetainCount);\n        } else {\n          _this2._retainCounts[\"delete\"](id);\n          _this2._cache[\"delete\"](id);\n        }\n      }\n    };\n  };\n  return ClientEdgeQueryResultsCache;\n}();\nvar FragmentResourceImpl = /*#__PURE__*/function () {\n  function FragmentResourceImpl(environment) {\n    this._environment = environment;\n    this._cache = LRUCache.create(CACHE_CAPACITY);\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      this._clientEdgeQueryResultsCache = new ClientEdgeQueryResultsCache(environment);\n    }\n  }\n  var _proto2 = FragmentResourceImpl.prototype;\n  _proto2.read = function read(fragmentNode, fragmentRef, componentDisplayName, fragmentKey) {\n    return this.readWithIdentifier(fragmentNode, fragmentRef, getFragmentIdentifier(fragmentNode, fragmentRef), componentDisplayName, fragmentKey);\n  };\n  _proto2.readWithIdentifier = function readWithIdentifier(fragmentNode, fragmentRef, fragmentIdentifier, componentDisplayName, fragmentKey) {\n    var _this3 = this;\n    var _fragmentNode$metadat, _fragmentNode$metadat2, _missingLiveResolverF2, _missingLiveResolverF3;\n    var environment = this._environment;\n    if (fragmentRef == null) {\n      return {\n        cacheKey: fragmentIdentifier,\n        data: null,\n        isMissingData: false,\n        snapshot: null,\n        storeEpoch: 0\n      };\n    }\n    var storeEpoch = environment.getStore().getEpoch();\n    if ((fragmentNode === null || fragmentNode === void 0 ? void 0 : (_fragmentNode$metadat = fragmentNode.metadata) === null || _fragmentNode$metadat === void 0 ? void 0 : _fragmentNode$metadat.plural) === true) {\n      !Array.isArray(fragmentRef) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected fragment pointer%s for fragment `%s` to be ' + 'an array, instead got `%s`. Remove `@relay(plural: true)` ' + 'from fragment `%s` to allow the prop to be an object.', fragmentKey != null ? \" for key `\".concat(fragmentKey, \"`\") : '', fragmentNode.name, typeof fragmentRef, fragmentNode.name) : invariant(false) : void 0;\n      if (fragmentRef.length === 0) {\n        return {\n          cacheKey: fragmentIdentifier,\n          data: CONSTANT_READONLY_EMPTY_ARRAY,\n          isMissingData: false,\n          snapshot: CONSTANT_READONLY_EMPTY_ARRAY,\n          storeEpoch: storeEpoch\n        };\n      }\n    }\n    var cachedValue = this._cache.get(fragmentIdentifier);\n    if (cachedValue != null) {\n      var _missingLiveResolverF;\n      if (cachedValue.kind === 'pending' && isPromise(cachedValue.promise)) {\n        environment.__log({\n          name: 'suspense.fragment',\n          data: cachedValue.result.data,\n          fragment: fragmentNode,\n          isRelayHooks: true,\n          isMissingData: cachedValue.result.isMissingData,\n          isPromiseCached: true,\n          pendingOperations: cachedValue.pendingOperations\n        });\n        throw cachedValue.promise;\n      }\n      if (cachedValue.kind === 'done' && cachedValue.result.snapshot && !((_missingLiveResolverF = missingLiveResolverFields(cachedValue.result.snapshot)) !== null && _missingLiveResolverF !== void 0 && _missingLiveResolverF.length)) {\n        this._throwOrLogErrorsInSnapshot(cachedValue.result.snapshot);\n        if (cachedValue.result.isMissingData) {\n          environment.__log({\n            name: 'fragmentresource.missing_data',\n            data: cachedValue.result.data,\n            fragment: fragmentNode,\n            isRelayHooks: true,\n            cached: true\n          });\n        }\n        return cachedValue.result;\n      }\n    }\n    var fragmentSelector = getSelector(fragmentNode, fragmentRef);\n    !(fragmentSelector != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to receive an object where `...%s` was spread, ' + 'but the fragment reference was not found`. This is most ' + 'likely the result of:\\n' + \"- Forgetting to spread `%s` in `%s`'s parent's fragment.\\n\" + '- Conditionally fetching `%s` but unconditionally passing %s prop ' + 'to `%s`. If the parent fragment only fetches the fragment conditionally ' + '- with e.g. `@include`, `@skip`, or inside a `... on SomeType { }` ' + 'spread  - then the fragment reference will not exist. ' + 'In this case, pass `null` if the conditions for evaluating the ' + 'fragment are not met (e.g. if the `@include(if)` value is false.)', fragmentNode.name, fragmentNode.name, componentDisplayName, fragmentNode.name, fragmentKey == null ? 'a fragment reference' : \"the `\".concat(fragmentKey, \"`\"), componentDisplayName) : invariant(false) : void 0;\n    var fragmentResult = null;\n    var snapshot = null;\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && cachedValue != null && cachedValue.kind === 'missing') {\n      fragmentResult = cachedValue.result;\n      snapshot = cachedValue.snapshot;\n    } else {\n      snapshot = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors.map(function (s) {\n        return environment.lookup(s);\n      }) : environment.lookup(fragmentSelector);\n      fragmentResult = getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n    }\n    if (!fragmentResult.isMissingData) {\n      this._throwOrLogErrorsInSnapshot(snapshot);\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n      return fragmentResult;\n    }\n    var clientEdgeRequests = null;\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && ((_fragmentNode$metadat2 = fragmentNode.metadata) === null || _fragmentNode$metadat2 === void 0 ? void 0 : _fragmentNode$metadat2.hasClientEdges) === true && hasMissingClientEdges(snapshot)) {\n      clientEdgeRequests = [];\n      var queryResource = getQueryResourceForEnvironment(this._environment);\n      var queryResults = [];\n      singularOrPluralForEach(snapshot, function (snap) {\n        var _snap$missingClientEd;\n        (_snap$missingClientEd = snap.missingClientEdges) === null || _snap$missingClientEd === void 0 ? void 0 : _snap$missingClientEd.forEach(function (_ref) {\n          var _clientEdgeRequests;\n          var request = _ref.request,\n            clientEdgeDestinationID = _ref.clientEdgeDestinationID;\n          var _this3$_performClient = _this3._performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID),\n            queryResult = _this3$_performClient.queryResult,\n            requestDescriptor = _this3$_performClient.requestDescriptor;\n          queryResults.push(queryResult);\n          (_clientEdgeRequests = clientEdgeRequests) === null || _clientEdgeRequests === void 0 ? void 0 : _clientEdgeRequests.push(requestDescriptor);\n        });\n      });\n      !(this._clientEdgeQueryResultsCache != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Client edge query result cache should exist when ENABLE_CLIENT_EDGES is on.') : invariant(false) : void 0;\n      this._clientEdgeQueryResultsCache.recordQueryResults(fragmentIdentifier, queryResults);\n    }\n    var clientEdgePromises = [];\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && clientEdgeRequests) {\n      clientEdgePromises = clientEdgeRequests.map(function (request) {\n        return getPromiseForActiveRequest(_this3._environment, request);\n      }).filter(Boolean);\n    }\n    var fragmentOwner = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors[0].owner : fragmentSelector.owner;\n    var parentQueryPromiseResult = this._getAndSavePromiseForFragmentRequestInFlight(fragmentIdentifier, fragmentNode, fragmentOwner, fragmentResult);\n    var parentQueryPromiseResultPromise = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.promise;\n    var missingResolverFieldPromises = (_missingLiveResolverF2 = (_missingLiveResolverF3 = missingLiveResolverFields(snapshot)) === null || _missingLiveResolverF3 === void 0 ? void 0 : _missingLiveResolverF3.map(function (_ref2) {\n      var liveStateID = _ref2.liveStateID;\n      var store = environment.getStore();\n      return store.getLiveResolverPromise(liveStateID);\n    })) !== null && _missingLiveResolverF2 !== void 0 ? _missingLiveResolverF2 : [];\n    if (clientEdgePromises.length || missingResolverFieldPromises.length || isPromise(parentQueryPromiseResultPromise)) {\n      var _parentQueryPromiseRe, _clientEdgeRequests2;\n      environment.__log({\n        name: 'suspense.fragment',\n        data: fragmentResult.data,\n        fragment: fragmentNode,\n        isRelayHooks: true,\n        isPromiseCached: false,\n        isMissingData: fragmentResult.isMissingData,\n        pendingOperations: [].concat((0, _toConsumableArray2[\"default\"])((_parentQueryPromiseRe = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.pendingOperations) !== null && _parentQueryPromiseRe !== void 0 ? _parentQueryPromiseRe : []), (0, _toConsumableArray2[\"default\"])((_clientEdgeRequests2 = clientEdgeRequests) !== null && _clientEdgeRequests2 !== void 0 ? _clientEdgeRequests2 : []))\n      });\n      var promises = [];\n      if (clientEdgePromises.length > 0) {\n        promises = promises.concat(clientEdgePromises);\n      }\n      if (missingResolverFieldPromises.length > 0) {\n        promises = promises.concat(missingResolverFieldPromises);\n      }\n      if (promises.length > 0) {\n        if (parentQueryPromiseResultPromise) {\n          promises.push(parentQueryPromiseResultPromise);\n        }\n        throw Promise.all(promises);\n      }\n      if (parentQueryPromiseResultPromise) {\n        throw parentQueryPromiseResultPromise;\n      }\n    }\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && fragmentResult.isMissingData) {\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n    }\n    this._throwOrLogErrorsInSnapshot(snapshot);\n    environment.__log({\n      name: 'fragmentresource.missing_data',\n      data: fragmentResult.data,\n      fragment: fragmentNode,\n      isRelayHooks: true,\n      cached: false\n    });\n    return getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n  };\n  _proto2._performClientEdgeQuery = function _performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID) {\n    var originalVariables = getVariablesFromFragment(fragmentNode, fragmentRef);\n    var variables = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, originalVariables), {}, {\n      id: clientEdgeDestinationID\n    });\n    var operation = createOperationDescriptor(request, variables, {});\n    var fetchObservable = fetchQuery(this._environment, operation);\n    var queryResult = queryResource.prepare(operation, fetchObservable);\n    return {\n      requestDescriptor: operation.request,\n      queryResult: queryResult\n    };\n  };\n  _proto2._throwOrLogErrorsInSnapshot = function _throwOrLogErrorsInSnapshot(snapshot) {\n    var _this4 = this;\n    if (Array.isArray(snapshot)) {\n      snapshot.forEach(function (s) {\n        handlePotentialSnapshotErrors(_this4._environment, s.missingRequiredFields, s.relayResolverErrors);\n      });\n    } else {\n      handlePotentialSnapshotErrors(this._environment, snapshot.missingRequiredFields, snapshot.relayResolverErrors);\n    }\n  };\n  _proto2.readSpec = function readSpec(fragmentNodes, fragmentRefs, componentDisplayName) {\n    var result = {};\n    for (var key in fragmentNodes) {\n      result[key] = this.read(fragmentNodes[key], fragmentRefs[key], componentDisplayName, key);\n    }\n    return result;\n  };\n  _proto2.subscribe = function subscribe(fragmentResult, callback) {\n    var _this5 = this;\n    var environment = this._environment;\n    var cacheKey = fragmentResult.cacheKey;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return {\n        dispose: function dispose() {}\n      };\n    }\n    var _this$checkMissedUpda = this.checkMissedUpdates(fragmentResult),\n      didMissUpdates = _this$checkMissedUpda[0],\n      currentSnapshot = _this$checkMissedUpda[1];\n    if (didMissUpdates) {\n      callback();\n    }\n    var disposables = [];\n    if (Array.isArray(renderedSnapshot)) {\n      !Array.isArray(currentSnapshot) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshots to be plural. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      currentSnapshot.forEach(function (snapshot, idx) {\n        disposables.push(environment.subscribe(snapshot, function (latestSnapshot) {\n          var storeEpoch = environment.getStore().getEpoch();\n          _this5._updatePluralSnapshot(cacheKey, currentSnapshot, latestSnapshot, idx, storeEpoch);\n          callback();\n        }));\n      });\n    } else {\n      !(currentSnapshot != null && !Array.isArray(currentSnapshot)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshot to be singular. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      disposables.push(environment.subscribe(currentSnapshot, function (latestSnapshot) {\n        var storeEpoch = environment.getStore().getEpoch();\n        var result = getFragmentResult(cacheKey, latestSnapshot, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          _this5._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: latestSnapshot\n          });\n        } else {\n          _this5._cache.set(cacheKey, {\n            kind: 'done',\n            result: getFragmentResult(cacheKey, latestSnapshot, storeEpoch)\n          });\n        }\n        callback();\n      }));\n    }\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      var _this$_clientEdgeQuer, _this$_clientEdgeQuer2;\n      var clientEdgeQueryResults = (_this$_clientEdgeQuer = (_this$_clientEdgeQuer2 = this._clientEdgeQueryResultsCache) === null || _this$_clientEdgeQuer2 === void 0 ? void 0 : _this$_clientEdgeQuer2.get(cacheKey)) !== null && _this$_clientEdgeQuer !== void 0 ? _this$_clientEdgeQuer : undefined;\n      if (clientEdgeQueryResults !== null && clientEdgeQueryResults !== void 0 && clientEdgeQueryResults.length) {\n        var queryResource = getQueryResourceForEnvironment(this._environment);\n        clientEdgeQueryResults.forEach(function (queryResult) {\n          disposables.push(queryResource.retain(queryResult));\n        });\n      }\n    }\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (s) {\n          return s.dispose();\n        });\n        _this5._cache[\"delete\"](cacheKey);\n      }\n    };\n  };\n  _proto2.subscribeSpec = function subscribeSpec(fragmentResults, callback) {\n    var _this6 = this;\n    var disposables = Object.keys(fragmentResults).map(function (key) {\n      return _this6.subscribe(fragmentResults[key], callback);\n    });\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (disposable) {\n          disposable.dispose();\n        });\n      }\n    };\n  };\n  _proto2.checkMissedUpdates = function checkMissedUpdates(fragmentResult) {\n    var environment = this._environment;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return [false, null];\n    }\n    var storeEpoch = null;\n    storeEpoch = environment.getStore().getEpoch();\n    if (fragmentResult.storeEpoch === storeEpoch) {\n      return [false, fragmentResult.snapshot];\n    }\n    var cacheKey = fragmentResult.cacheKey;\n    if (Array.isArray(renderedSnapshot)) {\n      var didMissUpdates = false;\n      var currentSnapshots = [];\n      renderedSnapshot.forEach(function (snapshot, idx) {\n        var currentSnapshot = environment.lookup(snapshot.selector);\n        var renderData = snapshot.data;\n        var currentData = currentSnapshot.data;\n        var updatedData = recycleNodesInto(renderData, currentData);\n        if (updatedData !== renderData) {\n          currentSnapshot = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, currentSnapshot), {}, {\n            data: updatedData\n          });\n          didMissUpdates = true;\n        }\n        currentSnapshots[idx] = currentSnapshot;\n      });\n      if (didMissUpdates) {\n        var result = getFragmentResult(cacheKey, currentSnapshots, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          this._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: currentSnapshots\n          });\n        } else {\n          this._cache.set(cacheKey, {\n            kind: 'done',\n            result: result\n          });\n        }\n      }\n      return [didMissUpdates, currentSnapshots];\n    }\n    var currentSnapshot = environment.lookup(renderedSnapshot.selector);\n    var renderData = renderedSnapshot.data;\n    var currentData = currentSnapshot.data;\n    var updatedData = recycleNodesInto(renderData, currentData);\n    var updatedCurrentSnapshot = {\n      data: updatedData,\n      isMissingData: currentSnapshot.isMissingData,\n      missingClientEdges: currentSnapshot.missingClientEdges,\n      missingLiveResolverFields: currentSnapshot.missingLiveResolverFields,\n      seenRecords: currentSnapshot.seenRecords,\n      selector: currentSnapshot.selector,\n      missingRequiredFields: currentSnapshot.missingRequiredFields,\n      relayResolverErrors: currentSnapshot.relayResolverErrors\n    };\n    if (updatedData !== renderData) {\n      var _result = getFragmentResult(cacheKey, updatedCurrentSnapshot, storeEpoch);\n      if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && _result.isMissingData) {\n        this._cache.set(cacheKey, {\n          kind: 'missing',\n          result: _result,\n          snapshot: updatedCurrentSnapshot\n        });\n      } else {\n        this._cache.set(cacheKey, {\n          kind: 'done',\n          result: _result\n        });\n      }\n    }\n    return [updatedData !== renderData, updatedCurrentSnapshot];\n  };\n  _proto2.checkMissedUpdatesSpec = function checkMissedUpdatesSpec(fragmentResults) {\n    var _this7 = this;\n    return Object.keys(fragmentResults).some(function (key) {\n      return _this7.checkMissedUpdates(fragmentResults[key])[0];\n    });\n  };\n  _proto2._getAndSavePromiseForFragmentRequestInFlight = function _getAndSavePromiseForFragmentRequestInFlight(cacheKey, fragmentNode, fragmentOwner, fragmentResult) {\n    var _this8 = this;\n    var pendingOperationsResult = getPendingOperationsForFragment(this._environment, fragmentNode, fragmentOwner);\n    if (pendingOperationsResult == null) {\n      return null;\n    }\n    var networkPromise = pendingOperationsResult.promise;\n    var pendingOperations = pendingOperationsResult.pendingOperations;\n    var promise = networkPromise.then(function () {\n      _this8._cache[\"delete\"](cacheKey);\n    })[\"catch\"](function (error) {\n      _this8._cache[\"delete\"](cacheKey);\n    });\n    promise.displayName = networkPromise.displayName;\n    this._cache.set(cacheKey, {\n      kind: 'pending',\n      pendingOperations: pendingOperations,\n      promise: promise,\n      result: fragmentResult\n    });\n    return {\n      promise: promise,\n      pendingOperations: pendingOperations\n    };\n  };\n  _proto2._updatePluralSnapshot = function _updatePluralSnapshot(cacheKey, baseSnapshots, latestSnapshot, idx, storeEpoch) {\n    var _currentFragmentResul;\n    var currentFragmentResult = this._cache.get(cacheKey);\n    if (isPromise(currentFragmentResult)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var currentSnapshot = currentFragmentResult === null || currentFragmentResult === void 0 ? void 0 : (_currentFragmentResul = currentFragmentResult.result) === null || _currentFragmentResul === void 0 ? void 0 : _currentFragmentResul.snapshot;\n    if (currentSnapshot && !Array.isArray(currentSnapshot)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var nextSnapshots = currentSnapshot ? (0, _toConsumableArray2[\"default\"])(currentSnapshot) : (0, _toConsumableArray2[\"default\"])(baseSnapshots);\n    nextSnapshots[idx] = latestSnapshot;\n    var result = getFragmentResult(cacheKey, nextSnapshots, storeEpoch);\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n      this._cache.set(cacheKey, {\n        kind: 'missing',\n        result: result,\n        snapshot: nextSnapshots\n      });\n    } else {\n      this._cache.set(cacheKey, {\n        kind: 'done',\n        result: result\n      });\n    }\n  };\n  return FragmentResourceImpl;\n}();\nfunction reportInvalidCachedData(nodeName) {\n  !false ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to find cached data for plural fragment `%s` when ' + 'receiving a subscription. ' + \"If you're seeing this, this is likely a bug in Relay.\", nodeName) : invariant(false) : void 0;\n}\nfunction createFragmentResource(environment) {\n  return new FragmentResourceImpl(environment);\n}\nvar dataResources = WEAKMAP_SUPPORTED ? new WeakMap() : new Map();\nfunction getFragmentResourceForEnvironment(environment) {\n  var cached = dataResources.get(environment);\n  if (cached) {\n    return cached;\n  }\n  var newDataResource = createFragmentResource(environment);\n  dataResources.set(environment, newDataResource);\n  return newDataResource;\n}\nmodule.exports = {\n  createFragmentResource: createFragmentResource,\n  getFragmentResourceForEnvironment: getFragmentResourceForEnvironment\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}